<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>TouchVision-AI</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Lucide Icons -->
  <script src="https://unpkg.com/lucide@latest"></script>
</head>

<!-- Adding in a Form -->
 <form id="uploadForm" action="/analyze" method="POST" enctype="multipart/form-data">
  <div id="dropZone" class="relative border-2 border-dashed border-white/30 bg-white/5 rounded-xl p-12 transition-all duration-200">
    <input id="fileInput" type="file" name="video" accept="video/*" class="hidden" />
    ...
  </div>
</form>


<body class="min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 flex flex-col">

  <!-- Header -->
  <header class="px-8 py-6 border-b border-white/10 backdrop-blur-sm">
    <div class="max-w-7xl mx-auto flex items-center gap-3">
      <div class="w-10 h-10 bg-gradient-to-br from-blue-500 to-cyan-400 rounded-lg flex items-center justify-center">
        <i data-lucide="play-circle" class="w-6 h-6 text-white"></i>
      </div>
      <h1 class="text-3xl font-bold text-white">TouchVision-AI</h1>
    </div>
  </header>

  <!-- Main -->
  <main class="flex-1 flex items-center justify-center px-4 py-12">
    <div class="max-w-4xl w-full">

      <!-- Intro -->
      <div class="text-center mb-12">
        <h2 class="text-4xl md:text-5xl font-bold text-white mb-4">
          AI-Powered Sports Video Analysis
        </h2>
        <p class="text-lg text-blue-200">
          Upload your sports footage and let AI analyze player movements, tactics, and performance
        </p>
      </div>

      <!-- Upload Card -->
      <div class="bg-white/10 backdrop-blur-md rounded-2xl p-8 border border-white/20 shadow-2xl">

        <!-- Drop Area -->
        <div
          id="dropZone"
          class="relative border-2 border-dashed border-white/30 bg-white/5 rounded-xl p-12 transition-all duration-200"
        >
          <input
            id="fileInput"
            type="file"
            accept="video/*"
            class="hidden"
          />

          <!-- Empty State -->
          <div id="emptyState" class="text-center">
            <div class="mx-auto w-20 h-20 bg-gradient-to-br from-blue-500 to-cyan-400 rounded-full flex items-center justify-center mb-6">
              <i data-lucide="video" class="w-10 h-10 text-white"></i>
            </div>
            <h3 class="text-xl font-semibold text-white mb-2">
              Drop your video here
            </h3>
            <p class="text-blue-200 mb-6">
              or click the button below to browse
            </p>
            <button
              id="chooseFileBtn"
              class="inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-blue-500 to-cyan-400 text-white font-semibold rounded-lg hover:from-blue-600 hover:to-cyan-500 transition-all shadow-lg"
            >
              <i data-lucide="upload" class="w-5 h-5"></i>
              Choose File
            </button>
          </div>

          <!-- File State -->
          <div id="fileState" class="hidden space-y-6">

            <div class="flex items-start gap-4 bg-white/10 rounded-lg p-4">
              <div class="w-12 h-12 bg-gradient-to-br from-blue-500 to-cyan-400 rounded-lg flex items-center justify-center">
                <i data-lucide="video" class="w-6 h-6 text-white"></i>
              </div>
              <div class="flex-1">
                <p id="fileName" class="text-white font-medium truncate"></p>
                <p id="fileSize" class="text-blue-200 text-sm"></p>
              </div>
              <i id="checkIcon" data-lucide="check-circle-2" class="hidden w-6 h-6 text-green-400"></i>
            </div>

            <div class="flex gap-3">
              <button
                id="changeFileBtn"
                class="flex-1 px-6 py-3 bg-white/10 text-white font-semibold rounded-lg hover:bg-white/20 border border-white/20"
              >
                Change File
              </button>

              <button
                id="analyzeBtn"
                class="flex-1 inline-flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-blue-500 to-cyan-400 text-white font-semibold rounded-lg hover:from-blue-600 hover:to-cyan-500 shadow-lg"
              >
                <i data-lucide="play-circle" class="w-5 h-5"></i>
                Analyze Video
              </button>
            </div>

            <!-- Loading -->
            <div id="loadingState" class="hidden space-y-2">
              <div class="w-full h-2 bg-white/10 rounded-full overflow-hidden">
                <div class="h-full bg-gradient-to-r from-blue-500 to-cyan-400 animate-pulse w-2/3"></div>
              </div>
              <p class="text-center text-blue-200 text-sm">
                Processing video with AI...
              </p>
            </div>

            <!-- Complete -->
            <div id="completeState" class="hidden bg-green-500/20 border border-green-400/30 rounded-lg p-4">
              <div class="flex items-center gap-2 text-green-400 mb-2">
                <i data-lucide="check-circle-2" class="w-5 h-5"></i>
                <span class="font-semibold">Analysis Complete!</span>
              </div>
              <p class="text-green-200 text-sm">
                Your video has been successfully analyzed. View detailed insights and metrics.
              </p>
            </div>

          </div>
        </div>

        <!-- Features -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-8 text-center">
          <div class="p-4">
            <div class="w-12 h-12 bg-blue-500/20 rounded-lg flex items-center justify-center mx-auto mb-3">
              <i data-lucide="video" class="w-6 h-6 text-blue-400"></i>
            </div>
            <h4 class="text-white font-semibold mb-1">Player Tracking</h4>
            <p class="text-blue-200 text-sm">Track player movements and positioning</p>
          </div>

          <div class="p-4">
            <div class="w-12 h-12 bg-cyan-500/20 rounded-lg flex items-center justify-center mx-auto mb-3">
              <i data-lucide="play-circle" class="w-6 h-6 text-cyan-400"></i>
            </div>
            <h4 class="text-white font-semibold mb-1">Tactical Analysis</h4>
            <p class="text-blue-200 text-sm">Identify patterns and strategies</p>
          </div>

          <div class="p-4">
            <div class="w-12 h-12 bg-purple-500/20 rounded-lg flex items-center justify-center mx-auto mb-3">
              <i data-lucide="check-circle-2" class="w-6 h-6 text-purple-400"></i>
            </div>
            <h4 class="text-white font-semibold mb-1">Performance Metrics</h4>
            <p class="text-blue-200 text-sm">Get detailed performance statistics</p>
          </div>
        </div>

      </div>
    </div>
  </main>

  <!-- Script -->
  <script>
    lucide.createIcons();

    const fileInput = document.getElementById("fileInput");
    const chooseFileBtn = document.getElementById("chooseFileBtn");
    const changeFileBtn = document.getElementById("changeFileBtn");
    const analyzeBtn = document.getElementById("analyzeBtn");
    const dropZone = document.getElementById("dropZone");

    const emptyState = document.getElementById("emptyState");
    const fileState = document.getElementById("fileState");
    const loadingState = document.getElementById("loadingState");
    const completeState = document.getElementById("completeState");
    const checkIcon = document.getElementById("checkIcon");

    const fileName = document.getElementById("fileName");
    const fileSize = document.getElementById("fileSize");

    let selectedFile = null;

    function formatSize(bytes) {
      const sizes = ["Bytes", "KB", "MB", "GB"];
      if (bytes === 0) return "0 Bytes";
      const i = Math.floor(Math.log(bytes) / Math.log(1024));
      return (bytes / Math.pow(1024, i)).toFixed(2) + " " + sizes[i];
    }

    function setFile(file) {
      selectedFile = file;
      fileName.textContent = file.name;
      fileSize.textContent = formatSize(file.size);
      emptyState.classList.add("hidden");
      fileState.classList.remove("hidden");
      completeState.classList.add("hidden");
      checkIcon.classList.add("hidden");
    }

    chooseFileBtn.onclick = () => fileInput.click();
    changeFileBtn.onclick = () => fileInput.click();

    fileInput.onchange = e => {
      if (e.target.files[0]) setFile(e.target.files[0]);
    };

    analyzeBtn.onclick = () => {
  if (!selectedFile) return;
  // Add file to form and submit
  const formData = new FormData();
  formData.append("video", selectedFile);

  fetch("/analyze", {
    method: "POST",
    body: formData
  })
  .then(response => response.text())
  .then(html => {
    document.open();
    document.write(html);
    document.close();
  })
  .catch(err => alert("Error uploading video: " + err));
};


    ["dragenter", "dragover"].forEach(event => {
      dropZone.addEventListener(event, e => {
        e.preventDefault();
        dropZone.classList.add("border-blue-400", "bg-blue-500/20");
      });
    });

    ["dragleave", "drop"].forEach(event => {
      dropZone.addEventListener(event, e => {
        e.preventDefault();
        dropZone.classList.remove("border-blue-400", "bg-blue-500/20");
      });
    });

    dropZone.addEventListener("drop", e => {
      if (e.dataTransfer.files[0]?.type.startsWith("video/")) {
        setFile(e.dataTransfer.files[0]);
      }
    });
  </script>
</body>
</html>
